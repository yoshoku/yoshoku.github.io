<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Numo::Libsvm
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Numo::Libsvm";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span>
     &raquo; 
    <span class="title">Libsvm</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Numo::Libsvm
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/numo/libsvm/libsvmext.c<span class="defines">,<br />
  lib/numo/libsvm/version.rb,<br /> ext/numo/libsvm/libsvmext.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Numo::Libsvm is a binding library for LIBSVM that handles dataset with Numo::NArray.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Libsvm/KernelType.html" title="Numo::Libsvm::KernelType (module)">KernelType</a></span>, <span class='object_link'><a href="Libsvm/SvmType.html" title="Numo::Libsvm::SvmType (module)">SvmType</a></span>
    
  
    
  
</p>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="VERSION-constant" class="">VERSION =
          <div class="docstring">
  <div class="discussion">
    
<p>The version of Numo::Libsvm you are using.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1.1.0</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="LIBSVM_VERSION-constant" class="">LIBSVM_VERSION =
          <div class="docstring">
  <div class="discussion">
    
<p>The version of LIBSVM used in backgroud library.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='const'>INT2NUM</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="#LIBSVM_VERSION-constant" title="Numo::Libsvm::LIBSVM_VERSION (constant)">LIBSVM_VERSION</a></span></span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cv-class_method" title="cv (class method)">.<strong>cv</strong>(x, y, param, n_folds)  &#x21d2; Numo::DFloat </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Perform cross validation under given parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decision_function-class_method" title="decision_function (class method)">.<strong>decision_function</strong>(x, param, model)  &#x21d2; Numo::DFloat </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculate decision values for given samples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_svm_model-class_method" title="load_svm_model (class method)">.<strong>load_svm_model</strong>(filename)  &#x21d2; Array </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Load the SVM parameters and model from a text file with LIBSVM format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#predict-class_method" title="predict (class method)">.<strong>predict</strong>(x, param, model)  &#x21d2; Numo::DFloat </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Predict class labels or values for given samples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#predict_proba-class_method" title="predict_proba (class method)">.<strong>predict_proba</strong>(x, param, model)  &#x21d2; Numo::DFloat </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Predict class probability for given samples.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_svm_model-class_method" title="save_svm_model (class method)">.<strong>save_svm_model</strong>(filename, param, model)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save the SVM parameters and model as a text file with LIBSVM format.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#train-class_method" title="train (class method)">.<strong>train</strong>(x, y, param)  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Train the SVM model according to the given training data.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="cv-class_method">
  
    .<strong>cv</strong>(x, y, param, n_folds)  &#x21d2; <tt>Numo::DFloat</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Perform cross validation under given parameters. The given samples are separated to n_fols folds. The predicted labels or values in the validation process are returned.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>numo/libsvm</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># x: samples
</span><span class='comment'># y: labels
</span>
<span class='comment'># Define parameters of C-SVC with RBF Kernel.
</span><span class='id identifier rubyid_param'>param</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='label'>svm_type:</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/SvmType.html" title="Numo::Libsvm::SvmType (module)">SvmType</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/SvmType.html#C_SVC-constant" title="Numo::Libsvm::SvmType::C_SVC (constant)">C_SVC</a></span></span><span class='comma'>,</span>
  <span class='label'>kernel_type:</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/KernelType.html" title="Numo::Libsvm::KernelType (module)">KernelType</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/KernelType.html#RBF-constant" title="Numo::Libsvm::KernelType::RBF (constant)">RBF</a></span></span><span class='comma'>,</span>
  <span class='label'>gamma:</span> <span class='float'>1.0</span><span class='comma'>,</span>
  <span class='label'>C:</span> <span class='int'>1</span><span class='comma'>,</span>
  <span class='label'>random_seed:</span> <span class='int'>1</span><span class='comma'>,</span>
  <span class='label'>verbose:</span> <span class='kw'>true</span>
<span class='rbrace'>}</span>

<span class='comment'># Perform 5-cross validation.
</span><span class='id identifier rubyid_n_folds'>n_folds</span> <span class='op'>=</span> <span class='int'>5</span>
<span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='period'>.</span><span class='id identifier rubyid_cv'>cv</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_param'>param</span><span class='comma'>,</span> <span class='id identifier rubyid_n_folds'>n_folds</span><span class='rparen'>)</span>

<span class='comment'># Print mean accuracy.
</span><span class='id identifier rubyid_mean_accuracy'>mean_accuracy</span> <span class='op'>=</span> <span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_res'>res</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span><span class='period'>.</span><span class='id identifier rubyid_fdiv'>fdiv</span><span class='lparen'>(</span><span class='id identifier rubyid_y'>y</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='rparen'>)</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Accuracy: %.1f %%</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lparen'>(</span><span class='int'>100</span> <span class='op'>*</span> <span class='id identifier rubyid_mean_accuracy'>mean_accuracy</span><span class='rparen'>)</span></code></pre>
    
  </div>

  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_features]) The samples to be used for training the model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The labels or target values for samples.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of an SVM model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>n_folds</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The number of folds.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The predicted class label or value of each sample.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the sample array is not 2-dimensional, the label array is not 1-dimensional, the sample array and label array do not have the same number of samples, or the hyperparameter has an invalid value, this error is raised.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 162</span>

static
VALUE cross_validation(VALUE self, VALUE x_val, VALUE y_val, VALUE param_hash, VALUE nr_folds)
{
  const int n_folds = NUM2INT(nr_folds);
  size_t t_shape[1];
  VALUE t_val;
  double* t_pt;
  narray_t* x_nary;
  narray_t* y_nary;
  char* err_msg;
  VALUE random_seed;
  VALUE verbose;
  struct svm_problem* problem;
  struct svm_parameter* param;

  if (CLASS_OF(x_val) != numo_cDFloat) {
    x_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, x_val);
  }
  if (CLASS_OF(y_val) != numo_cDFloat) {
    y_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, y_val);
  }
  if (!RTEST(nary_check_contiguous(x_val))) {
    x_val = nary_dup(x_val);
  }
  if (!RTEST(nary_check_contiguous(y_val))) {
    y_val = nary_dup(y_val);
  }

  GetNArray(x_val, x_nary);
  GetNArray(y_val, y_nary);
  if (NA_NDIM(x_nary) != 2) {
    rb_raise(rb_eArgError, &quot;Expect samples to be 2-D array.&quot;);
    return Qnil;
  }
  if (NA_NDIM(y_nary) != 1) {
    rb_raise(rb_eArgError, &quot;Expect label or target values to be 1-D arrray.&quot;);
    return Qnil;
  }
  if (NA_SHAPE(x_nary)[0] != NA_SHAPE(y_nary)[0]) {
    rb_raise(rb_eArgError, &quot;Expect to have the same number of samples for samples and labels.&quot;);
    return Qnil;
  }

  random_seed = rb_hash_aref(param_hash, ID2SYM(rb_intern(&quot;random_seed&quot;)));
  if (!NIL_P(random_seed)) {
    srand(NUM2UINT(random_seed));
  }

  param = rb_hash_to_svm_parameter(param_hash);
  problem = dataset_to_svm_problem(x_val, y_val);

  err_msg = svm_check_parameter(problem, param);
  if (err_msg) {
    xfree_svm_problem(problem);
    xfree_svm_parameter(param);
    rb_raise(rb_eArgError, &quot;Invalid LIBSVM parameter is given: %s&quot;, err_msg);
    return Qnil;
  }

  t_shape[0] = problem-&gt;l;
  t_val = rb_narray_new(numo_cDFloat, 1, t_shape);
  t_pt = (double*)na_get_pointer_for_write(t_val);

  verbose = rb_hash_aref(param_hash, ID2SYM(rb_intern(&quot;verbose&quot;)));
  if (verbose != Qtrue) {
    svm_set_print_string_function(print_null);
  }

  svm_cross_validation(problem, param, n_folds, t_pt);

  xfree_svm_problem(problem);
  xfree_svm_parameter(param);

  RB_GC_GUARD(x_val);
  RB_GC_GUARD(y_val);

  return t_val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="decision_function-class_method">
  
    .<strong>decision_function</strong>(x, param, model)  &#x21d2; <tt>Numo::DFloat</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculate decision values for given samples.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_features]) The samples to calculate the scores.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of the trained SVM model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model obtained from the training procedure.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_classes * (n_classes - 1) / 2]) The decision value of each sample.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the sample array is not 2-dimensional, this error is raised.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 320</span>

static
VALUE decision_function(VALUE self, VALUE x_val, VALUE param_hash, VALUE model_hash)
{
  struct svm_parameter* param;
  struct svm_model* model;
  struct svm_node* x_nodes;
  narray_t* x_nary;
  double* x_pt;
  size_t y_shape[2];
  VALUE y_val;
  double* y_pt;
  double* dec_values;
  int y_cols;
  int i, j;
  int n_samples;
  int n_features;

  /* Obtain C data structures. */
  if (CLASS_OF(x_val) != numo_cDFloat) {
    x_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, x_val);
  }
  if (!RTEST(nary_check_contiguous(x_val))) {
    x_val = nary_dup(x_val);
  }

  GetNArray(x_val, x_nary);
  if (NA_NDIM(x_nary) != 2) {
    rb_raise(rb_eArgError, &quot;Expect samples to be 2-D array.&quot;);
    return Qnil;
  }

  param = rb_hash_to_svm_parameter(param_hash);
  model = rb_hash_to_svm_model(model_hash);
  model-&gt;param = *param;

  /* Initialize some variables. */
  n_samples = (int)NA_SHAPE(x_nary)[0];
  n_features = (int)NA_SHAPE(x_nary)[1];

  if (model-&gt;param.svm_type == ONE_CLASS || model-&gt;param.svm_type == EPSILON_SVR || model-&gt;param.svm_type == NU_SVR) {
    y_shape[0] = n_samples;
    y_shape[1] = 1;
    y_val = rb_narray_new(numo_cDFloat, 1, y_shape);
  } else {
    y_shape[0] = n_samples;
    y_shape[1] = model-&gt;nr_class * (model-&gt;nr_class - 1) / 2;
    y_val = rb_narray_new(numo_cDFloat, 2, y_shape);
  }

  x_pt = (double*)na_get_pointer_for_read(x_val);
  y_pt = (double*)na_get_pointer_for_write(y_val);

  /* Predict values. */
  if (model-&gt;param.svm_type == ONE_CLASS || model-&gt;param.svm_type == EPSILON_SVR || model-&gt;param.svm_type == NU_SVR) {
    for (i = 0; i &lt; n_samples; i++) {
      x_nodes = dbl_vec_to_svm_node(&amp;x_pt[i * n_features], n_features);
      svm_predict_values(model, x_nodes, &amp;y_pt[i]);
      xfree(x_nodes);
    }
  } else {
    y_cols = (int)y_shape[1];
    dec_values = ALLOC_N(double, y_cols);
    for (i = 0; i &lt; n_samples; i++) {
      x_nodes = dbl_vec_to_svm_node(&amp;x_pt[i * n_features], n_features);
      svm_predict_values(model, x_nodes, dec_values);
      xfree(x_nodes);
      for (j = 0; j &lt; y_cols; j++) {
        y_pt[i * y_cols + j] = dec_values[j];
      }
    }
    xfree(dec_values);
  }

  xfree_svm_model(model);
  xfree_svm_parameter(param);

  RB_GC_GUARD(x_val);

  return y_val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_svm_model-class_method">
  
    .<strong>load_svm_model</strong>(filename)  &#x21d2; <tt>Array</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Load the SVM parameters and model from a text file with LIBSVM format.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The path to a file to load.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array contains the SVM parameters and model.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>This error raises when failed to load the model file.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 485</span>

static
VALUE load_svm_model(VALUE self, VALUE filename)
{
  char* filename_ = StringValuePtr(filename);
  struct svm_model* model = svm_load_model(filename_);
  VALUE res = rb_ary_new2(2);
  VALUE param_hash = Qnil;
  VALUE model_hash = Qnil;

  if (model == NULL) {
    rb_raise(rb_eIOError, &quot;Failed to load file &#39;%s&#39;&quot;, filename_);
    return Qnil;
  }

  if (model) {
    param_hash = svm_parameter_to_rb_hash(&amp;(model-&gt;param));
    model_hash = svm_model_to_rb_hash(model);
    svm_free_and_destroy_model(&amp;model);
  }

  rb_ary_store(res, 0, param_hash);
  rb_ary_store(res, 1, model_hash);

  RB_GC_GUARD(filename);

  return res;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="predict-class_method">
  
    .<strong>predict</strong>(x, param, model)  &#x21d2; <tt>Numo::DFloat</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Predict class labels or values for given samples.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_features]) The samples to calculate the scores.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of the trained SVM model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model obtained from the training procedure.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The predicted class label or value of each sample.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the sample array is not 2-dimensional, this error is raised.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 252</span>

static
VALUE predict(VALUE self, VALUE x_val, VALUE param_hash, VALUE model_hash)
{
  struct svm_parameter* param;
  struct svm_model* model;
  struct svm_node* x_nodes;
  narray_t* x_nary;
  double* x_pt;
  size_t y_shape[1];
  VALUE y_val;
  double* y_pt;
  int i, j, k;
  int n_samples;
  int n_features;
  int n_nonzero_features;

  /* Obtain C data structures. */
  if (CLASS_OF(x_val) != numo_cDFloat) {
    x_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, x_val);
  }
  if (!RTEST(nary_check_contiguous(x_val))) {
    x_val = nary_dup(x_val);
  }

  GetNArray(x_val, x_nary);
  if (NA_NDIM(x_nary) != 2) {
    rb_raise(rb_eArgError, &quot;Expect samples to be 2-D array.&quot;);
    return Qnil;
  }

  param = rb_hash_to_svm_parameter(param_hash);
  model = rb_hash_to_svm_model(model_hash);
  model-&gt;param = *param;

  /* Initialize some variables. */
  n_samples = (int)NA_SHAPE(x_nary)[0];
  n_features = (int)NA_SHAPE(x_nary)[1];
  y_shape[0] = n_samples;
  y_val = rb_narray_new(numo_cDFloat, 1, y_shape);
  y_pt = (double*)na_get_pointer_for_write(y_val);
  x_pt = (double*)na_get_pointer_for_read(x_val);

  /* Predict values. */
  for (i = 0; i &lt; n_samples; i++) {
    x_nodes = dbl_vec_to_svm_node(&amp;x_pt[i * n_features], n_features);
    y_pt[i] = svm_predict(model, x_nodes);
    xfree(x_nodes);
  }

  xfree_svm_model(model);
  xfree_svm_parameter(param);

  RB_GC_GUARD(x_val);

  return y_val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="predict_proba-class_method">
  
    .<strong>predict_proba</strong>(x, param, model)  &#x21d2; <tt>Numo::DFloat</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Predict class probability for given samples. The model must have probability information calcualted in training procedure. The parameter &#39;:probability&#39; set to 1 in training procedure.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_features]) The samples to predict the class probabilities.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of the trained SVM model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model obtained from the training procedure.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_classes]) Predicted probablity of each class per sample.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the sample array is not 2-dimensional, this error is raised.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 413</span>

static
VALUE predict_proba(VALUE self, VALUE x_val, VALUE param_hash, VALUE model_hash)
{
  struct svm_parameter* param;
  struct svm_model* model;
  struct svm_node* x_nodes;
  narray_t* x_nary;
  double* x_pt;
  size_t y_shape[2];
  VALUE y_val = Qnil;
  double* y_pt;
  double* probs;
  int i, j;
  int n_samples;
  int n_features;

  GetNArray(x_val, x_nary);
  if (NA_NDIM(x_nary) != 2) {
    rb_raise(rb_eArgError, &quot;Expect samples to be 2-D array.&quot;);
    return Qnil;
  }

  param = rb_hash_to_svm_parameter(param_hash);
  model = rb_hash_to_svm_model(model_hash);
  model-&gt;param = *param;

  if ((model-&gt;param.svm_type == C_SVC || model-&gt;param.svm_type == NU_SVC) &amp;&amp; model-&gt;probA != NULL &amp;&amp; model-&gt;probB != NULL) {
    /* Obtain C data structures. */
    if (CLASS_OF(x_val) != numo_cDFloat) {
      x_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, x_val);
    }
    if (!RTEST(nary_check_contiguous(x_val))) {
      x_val = nary_dup(x_val);
    }

    /* Initialize some variables. */
    n_samples = (int)NA_SHAPE(x_nary)[0];
    n_features = (int)NA_SHAPE(x_nary)[1];
    y_shape[0] = n_samples;
    y_shape[1] = model-&gt;nr_class;
    y_val = rb_narray_new(numo_cDFloat, 2, y_shape);
    x_pt = (double*)na_get_pointer_for_read(x_val);
    y_pt = (double*)na_get_pointer_for_write(y_val);

    /* Predict values. */
    probs = ALLOC_N(double, model-&gt;nr_class);
    for (i = 0; i &lt; n_samples; i++) {
      x_nodes = dbl_vec_to_svm_node(&amp;x_pt[i * n_features], n_features);
      svm_predict_probability(model, x_nodes, probs);
      xfree(x_nodes);
      for (j = 0; j &lt; model-&gt;nr_class; j++) {
        y_pt[i * model-&gt;nr_class + j] = probs[j];
      }
    }
    xfree(probs);
  }

  xfree_svm_model(model);
  xfree_svm_parameter(param);

  RB_GC_GUARD(x_val);

  return y_val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_svm_model-class_method">
  
    .<strong>save_svm_model</strong>(filename, param, model)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Save the SVM parameters and model as a text file with LIBSVM format. The saved file can be used with the libsvm tools. Note that the svm_save_model saves only the parameters necessary for estimation with the trained model.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>filename</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The path to a file to save.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of the trained SVM model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>model</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model obtained from the training procedure.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>true on success, or false if an error occurs.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>IOError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>This error raises when failed to save the model file.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 525</span>

static
VALUE save_svm_model(VALUE self, VALUE filename, VALUE param_hash, VALUE model_hash)
{
  char* filename_ = StringValuePtr(filename);
  struct svm_parameter* param = rb_hash_to_svm_parameter(param_hash);
  struct svm_model* model = rb_hash_to_svm_model(model_hash);
  int res;

  model-&gt;param = *param;
  res = svm_save_model(filename_, model);

  xfree_svm_model(model);
  xfree_svm_parameter(param);

  if (res &lt; 0) {
    rb_raise(rb_eIOError, &quot;Failed to save file &#39;%s&#39;&quot;, filename_);
    return Qfalse;
  }

  RB_GC_GUARD(filename);

  return Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="train-class_method">
  
    .<strong>train</strong>(x, y, param)  &#x21d2; <tt>Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Train the SVM model according to the given training data.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>numo/libsvm</span><span class='tstring_end'>&#39;</span></span>

<span class='comment'># Prepare XOR data.
</span><span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'>DFloat</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='op'>-</span><span class='float'>0.8</span><span class='comma'>,</span> <span class='op'>-</span><span class='float'>0.7</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='float'>0.9</span><span class='comma'>,</span> <span class='float'>0.8</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='op'>-</span><span class='float'>0.7</span><span class='comma'>,</span> <span class='float'>0.9</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='float'>0.8</span><span class='comma'>,</span> <span class='op'>-</span><span class='float'>0.9</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_y'>y</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'>Int32</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span>

<span class='comment'># Train C-Support Vector Classifier with RBF kernel.
</span><span class='id identifier rubyid_param'>param</span> <span class='op'>=</span> <span class='lbrace'>{</span>
  <span class='label'>svm_type:</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/SvmType.html" title="Numo::Libsvm::SvmType (module)">SvmType</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/SvmType.html#C_SVC-constant" title="Numo::Libsvm::SvmType::C_SVC (constant)">C_SVC</a></span></span><span class='comma'>,</span>
  <span class='label'>kernel_type:</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/KernelType.html" title="Numo::Libsvm::KernelType (module)">KernelType</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Libsvm/KernelType.html#RBF-constant" title="Numo::Libsvm::KernelType::RBF (constant)">RBF</a></span></span><span class='comma'>,</span>
  <span class='label'>gamma:</span> <span class='float'>2.0</span><span class='comma'>,</span>
  <span class='label'>C:</span> <span class='int'>1</span><span class='comma'>,</span>
  <span class='label'>random_seed:</span> <span class='int'>1</span>
<span class='rbrace'>}</span>
<span class='id identifier rubyid_model'>model</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='period'>.</span><span class='id identifier rubyid_train'>train</span><span class='lparen'>(</span><span class='id identifier rubyid_x'>x</span><span class='comma'>,</span> <span class='id identifier rubyid_y'>y</span><span class='comma'>,</span> <span class='id identifier rubyid_param'>param</span><span class='rparen'>)</span>

<span class='comment'># Predict labels of test data.
</span><span class='id identifier rubyid_x_test'>x_test</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'>DFloat</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='op'>-</span><span class='float'>0.4</span><span class='comma'>,</span> <span class='op'>-</span><span class='float'>0.5</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='float'>0.5</span><span class='comma'>,</span> <span class='op'>-</span><span class='float'>0.4</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Numo.html" title="Numo (module)">Numo</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Numo::Libsvm (module)">Libsvm</a></span></span><span class='period'>.</span><span class='id identifier rubyid_predict'><span class='object_link'><a href="#predict-class_method" title="Numo::Libsvm.predict (method)">predict</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_x_test'>x_test</span><span class='comma'>,</span> <span class='id identifier rubyid_param'>param</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_result'>result</span>
<span class='comment'># Numo::DFloat#shape=[2]
</span><span class='comment'># [-1, 1]</span></code></pre>
    
  </div>

  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>x</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples, n_features]) The samples to be used for training the model.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y</span>
      
      
        <span class='type'>(<tt>Numo::DFloat</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The labels or target values for samples.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>param</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The parameters of an SVM model.</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The model obtained from the training procedure.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If the sample array is not 2-dimensional, the label array is not 1-dimensional, the sample array and label array do not have the same number of samples, or the hyperparameter has an invalid value, this error is raised.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/numo/libsvm/libsvmext.c', line 48</span>

static
VALUE train(VALUE self, VALUE x_val, VALUE y_val, VALUE param_hash)
{
  struct svm_problem* problem;
  struct svm_parameter* param;
  struct svm_model* model;
  narray_t* x_nary;
  narray_t* y_nary;
  char* err_msg;
  VALUE random_seed;
  VALUE verbose;
  VALUE model_hash;

  if (CLASS_OF(x_val) != numo_cDFloat) {
    x_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, x_val);
  }
  if (CLASS_OF(y_val) != numo_cDFloat) {
    y_val = rb_funcall(numo_cDFloat, rb_intern(&quot;cast&quot;), 1, y_val);
  }
  if (!RTEST(nary_check_contiguous(x_val))) {
    x_val = nary_dup(x_val);
  }
  if (!RTEST(nary_check_contiguous(y_val))) {
    y_val = nary_dup(y_val);
  }

  GetNArray(x_val, x_nary);
  GetNArray(y_val, y_nary);
  if (NA_NDIM(x_nary) != 2) {
    rb_raise(rb_eArgError, &quot;Expect samples to be 2-D array.&quot;);
    return Qnil;
  }
  if (NA_NDIM(y_nary) != 1) {
    rb_raise(rb_eArgError, &quot;Expect label or target values to be 1-D arrray.&quot;);
    return Qnil;
  }
  if (NA_SHAPE(x_nary)[0] != NA_SHAPE(y_nary)[0]) {
    rb_raise(rb_eArgError, &quot;Expect to have the same number of samples for samples and labels.&quot;);
    return Qnil;
  }

  random_seed = rb_hash_aref(param_hash, ID2SYM(rb_intern(&quot;random_seed&quot;)));
  if (!NIL_P(random_seed)) {
    srand(NUM2UINT(random_seed));
  }

  param = rb_hash_to_svm_parameter(param_hash);
  problem = dataset_to_svm_problem(x_val, y_val);

  err_msg = svm_check_parameter(problem, param);
  if (err_msg) {
    xfree_svm_problem(problem);
    xfree_svm_parameter(param);
    rb_raise(rb_eArgError, &quot;Invalid LIBSVM parameter is given: %s&quot;, err_msg);
    return Qnil;
  }

  verbose = rb_hash_aref(param_hash, ID2SYM(rb_intern(&quot;verbose&quot;)));
  if (verbose != Qtrue) {
    svm_set_print_string_function(print_null);
  }

  model = svm_train(problem, param);
  model_hash = svm_model_to_rb_hash(model);
  svm_free_and_destroy_model(&amp;model);

  xfree_svm_problem(problem);
  xfree_svm_parameter(param);

  RB_GC_GUARD(x_val);
  RB_GC_GUARD(y_val);

  return model_hash;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jun  8 00:18:27 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.3).
</div>

    </div>
  </body>
</html>