<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: Rumale::EvaluationMeasure
  
    &mdash; Documentation by YARD 0.9.24
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Rumale::EvaluationMeasure";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span>
     &raquo; 
    <span class="title">EvaluationMeasure</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Rumale::EvaluationMeasure
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/rumale/evaluation_measure/recall.rb<span class="defines">,<br />
  lib/rumale/evaluation_measure/purity.rb,<br /> lib/rumale/evaluation_measure/f_score.rb,<br /> lib/rumale/evaluation_measure/roc_auc.rb,<br /> lib/rumale/evaluation_measure/accuracy.rb,<br /> lib/rumale/evaluation_measure/function.rb,<br /> lib/rumale/evaluation_measure/log_loss.rb,<br /> lib/rumale/evaluation_measure/r2_score.rb,<br /> lib/rumale/evaluation_measure/precision.rb,<br /> lib/rumale/evaluation_measure/precision_recall.rb,<br /> lib/rumale/evaluation_measure/silhouette_score.rb,<br /> lib/rumale/evaluation_measure/mean_squared_error.rb,<br /> lib/rumale/evaluation_measure/mutual_information.rb,<br /> lib/rumale/evaluation_measure/adjusted_rand_score.rb,<br /> lib/rumale/evaluation_measure/mean_absolute_error.rb,<br /> lib/rumale/evaluation_measure/davies_bouldin_score.rb,<br /> lib/rumale/evaluation_measure/median_absolute_error.rb,<br /> lib/rumale/evaluation_measure/mean_squared_log_error.rb,<br /> lib/rumale/evaluation_measure/calinski_harabasz_score.rb,<br /> lib/rumale/evaluation_measure/explained_variance_score.rb,<br /> lib/rumale/evaluation_measure/normalized_mutual_information.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This module consists of the classes for model evaluation.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="EvaluationMeasure/Accuracy.html" title="Rumale::EvaluationMeasure::Accuracy (class)">Accuracy</a></span>, <span class='object_link'><a href="EvaluationMeasure/AdjustedRandScore.html" title="Rumale::EvaluationMeasure::AdjustedRandScore (class)">AdjustedRandScore</a></span>, <span class='object_link'><a href="EvaluationMeasure/CalinskiHarabaszScore.html" title="Rumale::EvaluationMeasure::CalinskiHarabaszScore (class)">CalinskiHarabaszScore</a></span>, <span class='object_link'><a href="EvaluationMeasure/DaviesBouldinScore.html" title="Rumale::EvaluationMeasure::DaviesBouldinScore (class)">DaviesBouldinScore</a></span>, <span class='object_link'><a href="EvaluationMeasure/ExplainedVarianceScore.html" title="Rumale::EvaluationMeasure::ExplainedVarianceScore (class)">ExplainedVarianceScore</a></span>, <span class='object_link'><a href="EvaluationMeasure/FScore.html" title="Rumale::EvaluationMeasure::FScore (class)">FScore</a></span>, <span class='object_link'><a href="EvaluationMeasure/LogLoss.html" title="Rumale::EvaluationMeasure::LogLoss (class)">LogLoss</a></span>, <span class='object_link'><a href="EvaluationMeasure/MeanAbsoluteError.html" title="Rumale::EvaluationMeasure::MeanAbsoluteError (class)">MeanAbsoluteError</a></span>, <span class='object_link'><a href="EvaluationMeasure/MeanSquaredError.html" title="Rumale::EvaluationMeasure::MeanSquaredError (class)">MeanSquaredError</a></span>, <span class='object_link'><a href="EvaluationMeasure/MeanSquaredLogError.html" title="Rumale::EvaluationMeasure::MeanSquaredLogError (class)">MeanSquaredLogError</a></span>, <span class='object_link'><a href="EvaluationMeasure/MedianAbsoluteError.html" title="Rumale::EvaluationMeasure::MedianAbsoluteError (class)">MedianAbsoluteError</a></span>, <span class='object_link'><a href="EvaluationMeasure/MutualInformation.html" title="Rumale::EvaluationMeasure::MutualInformation (class)">MutualInformation</a></span>, <span class='object_link'><a href="EvaluationMeasure/NormalizedMutualInformation.html" title="Rumale::EvaluationMeasure::NormalizedMutualInformation (class)">NormalizedMutualInformation</a></span>, <span class='object_link'><a href="EvaluationMeasure/Precision.html" title="Rumale::EvaluationMeasure::Precision (class)">Precision</a></span>, <span class='object_link'><a href="EvaluationMeasure/Purity.html" title="Rumale::EvaluationMeasure::Purity (class)">Purity</a></span>, <span class='object_link'><a href="EvaluationMeasure/R2Score.html" title="Rumale::EvaluationMeasure::R2Score (class)">R2Score</a></span>, <span class='object_link'><a href="EvaluationMeasure/ROCAUC.html" title="Rumale::EvaluationMeasure::ROCAUC (class)">ROCAUC</a></span>, <span class='object_link'><a href="EvaluationMeasure/Recall.html" title="Rumale::EvaluationMeasure::Recall (class)">Recall</a></span>, <span class='object_link'><a href="EvaluationMeasure/SilhouetteScore.html" title="Rumale::EvaluationMeasure::SilhouetteScore (class)">SilhouetteScore</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#classification_report-class_method" title="classification_report (class method)">.<strong>classification_report</strong>(y_true, y_pred, target_name: nil, output_hash: false)  &#x21d2; String/Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Output a summary of classification performance for each class.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#confusion_matrix-class_method" title="confusion_matrix (class method)">.<strong>confusion_matrix</strong>(y_true, y_pred)  &#x21d2; Numo::Int32 </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculate confusion matrix for evaluating classification performance.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="classification_report-class_method">
  
    .<strong>classification_report</strong>(y_true, y_pred, target_name: nil, output_hash: false)  &#x21d2; <tt>String/Hash</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Output a summary of classification performance for each class.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_y_true'>y_true</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_y_pred'>y_pred</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_puts'>puts</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_classification_report'>classification_report</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>

<span class='comment'>#               precision    recall  f1-score   support
</span><span class='comment'>#
</span><span class='comment'>#            0       0.33      0.50      0.40         2
</span><span class='comment'>#            1       0.67      1.00      0.80         2
</span><span class='comment'>#            2       1.00      0.33      0.50         3
</span><span class='comment'>#
</span><span class='comment'>#     accuracy                           0.57         7
</span><span class='comment'>#    macro avg       0.67      0.61      0.57         7
</span><span class='comment'># weighted avg       0.71      0.57      0.56         7</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>y_true</span>
      
      
        <span class='type'>(<tt>Numo::Int32</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The ground truth labels.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y_pred</span>
      
      
        <span class='type'>(<tt>Numo::Int32</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The predicted labels.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>target_name</span>
      
      
        <span class='type'>(<tt>Nil/Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The label names.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>output_hash</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The flag indicating whether to output with Ruby Hash.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String/Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The summary of classification performance. If output_hash is true, it returns the summary with Ruby Hash.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rumale/evaluation_measure/function.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_classification_report'>classification_report</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='comma'>,</span> <span class='label'>target_name:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>output_hash:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y_true'>y_true</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'>Validation</span><span class='period'>.</span><span class='id identifier rubyid_check_convert_label_array'>check_convert_label_array</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y_pred'>y_pred</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'>Validation</span><span class='period'>.</span><span class='id identifier rubyid_check_convert_label_array'>check_convert_label_array</span><span class='lparen'>(</span><span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>  <span class='comment'># calculate each evaluation measure.
</span>
  <span class='id identifier rubyid_classes'>classes</span> <span class='op'>=</span> <span class='id identifier rubyid_y_true'>y_true</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
  <span class='id identifier rubyid_supports'>supports</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='period'>.</span><span class='id identifier rubyid_asarray'>asarray</span><span class='lparen'>(</span><span class='id identifier rubyid_classes'>classes</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_label'>label</span><span class='op'>|</span> <span class='id identifier rubyid_y_true'>y_true</span><span class='period'>.</span><span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_label'>label</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_precisions'>precisions</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_precision_each_class'>precision_each_class</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_recalls'>recalls</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_recall_each_class'>recall_each_class</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_fscores'>fscores</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_f_score_each_class'>f_score_each_class</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_macro_precision'>macro_precision</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_macro_average_precision'>macro_average_precision</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_macro_recall'>macro_recall</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_macro_average_recall'>macro_average_recall</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_macro_fscore'>macro_fscore</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'>PrecisionRecall</span><span class='period'>.</span><span class='id identifier rubyid_macro_average_f_score'>macro_average_f_score</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_accuracy'>accuracy</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="EvaluationMeasure/Accuracy.html" title="Rumale::EvaluationMeasure::Accuracy (class)">Accuracy</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_score'><span class='object_link'><a href="EvaluationMeasure/Accuracy.html#score-instance_method" title="Rumale::EvaluationMeasure::Accuracy#score (method)">score</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_sum_supports'>sum_supports</span> <span class='op'>=</span> <span class='id identifier rubyid_supports'>supports</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='id identifier rubyid_weights'>weights</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>DFloat</span><span class='period'>.</span><span class='id identifier rubyid_cast'>cast</span><span class='lparen'>(</span><span class='id identifier rubyid_supports'>supports</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='id identifier rubyid_sum_supports'>sum_supports</span>
  <span class='id identifier rubyid_weighted_precision'>weighted_precision</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Numo</span><span class='op'>::</span><span class='const'>DFloat</span><span class='period'>.</span><span class='id identifier rubyid_cast'>cast</span><span class='lparen'>(</span><span class='id identifier rubyid_precisions'>precisions</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_weights'>weights</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='id identifier rubyid_weighted_recall'>weighted_recall</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Numo</span><span class='op'>::</span><span class='const'>DFloat</span><span class='period'>.</span><span class='id identifier rubyid_cast'>cast</span><span class='lparen'>(</span><span class='id identifier rubyid_recalls'>recalls</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_weights'>weights</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>
  <span class='id identifier rubyid_weighted_fscore'>weighted_fscore</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Numo</span><span class='op'>::</span><span class='const'>DFloat</span><span class='period'>.</span><span class='id identifier rubyid_cast'>cast</span><span class='lparen'>(</span><span class='id identifier rubyid_fscores'>fscores</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='id identifier rubyid_weights'>weights</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sum'>sum</span>  <span class='comment'># output reults.
</span>
  <span class='id identifier rubyid_target_name'>target_name</span> <span class='op'>||=</span> <span class='id identifier rubyid_classes'>classes</span>
  <span class='id identifier rubyid_target_name'>target_name</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_output_hash'>output_hash</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='id identifier rubyid_target_name'>target_name</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
      <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='id identifier rubyid_label'>label</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='label'>precision:</span> <span class='id identifier rubyid_precisions'>precisions</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>recall:</span> <span class='id identifier rubyid_recalls'>recalls</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>fscore:</span> <span class='id identifier rubyid_fscores'>fscores</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>support:</span> <span class='id identifier rubyid_supports'>supports</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='symbol'>:accuracy</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_accuracy'>accuracy</span>
    <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='symbol'>:macro_avg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>precision:</span> <span class='id identifier rubyid_macro_precision'>macro_precision</span><span class='comma'>,</span>
      <span class='label'>recall:</span> <span class='id identifier rubyid_macro_recall'>macro_recall</span><span class='comma'>,</span>
      <span class='label'>fscore:</span> <span class='id identifier rubyid_macro_fscore'>macro_fscore</span><span class='comma'>,</span>
      <span class='label'>support:</span> <span class='id identifier rubyid_sum_supports'>sum_supports</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_res'>res</span><span class='lbracket'>[</span><span class='symbol'>:weighted_avg</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>precision:</span> <span class='id identifier rubyid_weighted_precision'>weighted_precision</span><span class='comma'>,</span>
      <span class='label'>recall:</span> <span class='id identifier rubyid_weighted_recall'>weighted_recall</span><span class='comma'>,</span>
      <span class='label'>fscore:</span> <span class='id identifier rubyid_weighted_fscore'>weighted_fscore</span><span class='comma'>,</span>
      <span class='label'>support:</span> <span class='id identifier rubyid_sum_supports'>sum_supports</span>
    <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_width'>width</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>12</span><span class='comma'>,</span> <span class='id identifier rubyid_target_name'>target_name</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:size</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span> <span class='comment'># 12 is &#39;weighted avg&#39;.size
</span>    <span class='id identifier rubyid_res'>res</span> <span class='op'>=</span> <span class='op'>+</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span> <span class='op'>*</span> <span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'>  precision    recall  f1-score   support\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_target_name'>target_name</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_label'>label</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='op'>|</span>
      <span class='id identifier rubyid_label_str'>label_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'>s</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_label'>label</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_precision_str'>precision_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_precisions'>precisions</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_recall_str'>recall_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_recalls'>recalls</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_fscore_str'>fscore_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_fscores'>fscores</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_supports_str'>supports_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_supports'>supports</span><span class='lbracket'>[</span><span class='id identifier rubyid_n'>n</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_label_str'>label_str</span><span class='embexpr_end'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_precision_str'>precision_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_recall_str'>recall_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fscore_str'>fscore_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_supports_str'>supports_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_supports_str'>supports_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_sum_supports'>sum_supports</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_accuracy_str'>accuracy_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#30s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_accuracy'>accuracy</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'>s </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>accuracy</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_accuracy_str'>accuracy_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_supports_str'>supports_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_precision_str'>precision_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_macro_precision'>macro_precision</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_recall_str'>recall_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_macro_recall'>macro_recall</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fscore_str'>fscore_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_macro_fscore'>macro_fscore</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'>s </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>macro avg</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_precision_str'>precision_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_recall_str'>recall_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fscore_str'>fscore_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_supports_str'>supports_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_precision_str'>precision_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_weighted_precision'>weighted_precision</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_recall_str'>recall_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_weighted_recall'>weighted_recall</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_fscore_str'>fscore_str</span> <span class='op'>=</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%#10s</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_weighted_fscore'>weighted_fscore</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_width'>width</span><span class='embexpr_end'>}</span><span class='tstring_content'>s </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>weighted avg</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_res'>res</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_precision_str'>precision_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_recall_str'>recall_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_fscore_str'>fscore_str</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_supports_str'>supports_str</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_res'>res</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="confusion_matrix-class_method">
  
    .<strong>confusion_matrix</strong>(y_true, y_pred)  &#x21d2; <tt>Numo::Int32</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculate confusion matrix for evaluating classification performance.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_y_true'>y_true</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_y_pred'>y_pred</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='rbracket'>]</span>
<span class='id identifier rubyid_p'>p</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Rumale::EvaluationMeasure (module)">EvaluationMeasure</a></span></span><span class='period'>.</span><span class='id identifier rubyid_confusion_matrix'>confusion_matrix</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>

<span class='comment'># Numo::Int32#shape=[3,3]
</span><span class='comment'># [[2, 0, 0],
</span><span class='comment'>#  [0, 0, 1],
</span><span class='comment'>#  [1, 0, 2]]</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>y_true</span>
      
      
        <span class='type'>(<tt>Numo::Int32</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The ground truth labels.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>y_pred</span>
      
      
        <span class='type'>(<tt>Numo::Int32</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_samples]) The predicted labels.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numo::Int32</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>(shape: [n_classes, n_classes]) The confusion matrix.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rumale/evaluation_measure/function.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_confusion_matrix'>confusion_matrix</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='comma'>,</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y_true'>y_true</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'>Validation</span><span class='period'>.</span><span class='id identifier rubyid_check_convert_label_array'>check_convert_label_array</span><span class='lparen'>(</span><span class='id identifier rubyid_y_true'>y_true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y_pred'>y_pred</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Rumale.html" title="Rumale (module)">Rumale</a></span></span><span class='op'>::</span><span class='const'>Validation</span><span class='period'>.</span><span class='id identifier rubyid_check_convert_label_array'>check_convert_label_array</span><span class='lparen'>(</span><span class='id identifier rubyid_y_pred'>y_pred</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_labels'>labels</span> <span class='op'>=</span> <span class='id identifier rubyid_y_true'>y_true</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_sort'>sort</span>
  <span class='id identifier rubyid_n_labels'>n_labels</span> <span class='op'>=</span> <span class='id identifier rubyid_labels'>labels</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>

  <span class='id identifier rubyid_conf_mat'>conf_mat</span> <span class='op'>=</span> <span class='const'>Numo</span><span class='op'>::</span><span class='const'>Int32</span><span class='period'>.</span><span class='id identifier rubyid_zeros'>zeros</span><span class='lparen'>(</span><span class='id identifier rubyid_n_labels'>n_labels</span><span class='comma'>,</span> <span class='id identifier rubyid_n_labels'>n_labels</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_labels'>labels</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lbl_a'>lbl_a</span><span class='comma'>,</span> <span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_y_p'>y_p</span> <span class='op'>=</span> <span class='id identifier rubyid_y_pred'>y_pred</span><span class='lbracket'>[</span><span class='id identifier rubyid_y_true'>y_true</span><span class='period'>.</span><span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_lbl_a'>lbl_a</span><span class='rparen'>)</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_labels'>labels</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_lbl_b'>lbl_b</span><span class='comma'>,</span> <span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='id identifier rubyid_conf_mat'>conf_mat</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_y_p'>y_p</span><span class='period'>.</span><span class='id identifier rubyid_eq'>eq</span><span class='lparen'>(</span><span class='id identifier rubyid_lbl_b'>lbl_b</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_conf_mat'>conf_mat</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Jul 24 01:30:38 2020 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.24 (ruby-2.7.0).
</div>

    </div>
  </body>
</html>